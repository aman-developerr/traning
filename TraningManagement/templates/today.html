{% extends 'base.html' %}
{% block title %}
Today
{% endblock %}
{% block body %}
    <div class="container">
        <div class="row">
            <div class="offset-md-4 col-md-4 offset-sm-3 col-sm-6">
                <form method="post">
                    {% csrf_token %}
                    {% if check == 0 %}
                        <h4 class="text-white">Today's Check-In</h4><br>
                        <input type="text" class="form-control" disabled value="{{ todays_date }}">
                        <input type="hidden" id="longitude" name="longitude">
                        <input type="hidden" id="latitude" name="latitude"><br>
                        <p class="btn btn-outline-success" id="loc" onclick="getLocation()">Get location</p>
                        <input type="submit" id="checkbtn" class="btn btn-outline-primary" style="display: none" value="Check-In">
                    {% elif check == 1 %}
                        <h4 class="text-white">Today's Check-Out</h4><br>
                        <input type="text" disabled class="form-control" value="{{ todays_date }}">
                        <input type="hidden" id="longitude" name="longitude">
                        <input type="hidden" id="latitude" name="latitude"><br>
                        <p class="btn btn-outline-success" id="loc" onclick="getLocation()">Get location</p>
                        <input type="submit" class="btn btn-outline-primary" id="checkbtn" style="display: none" value="check-out">
                    {% else %}
                        <h3 class="text-white">Your check in check out done</h3>
                    {% endif %}
                </form>
            </div>
        </div>
    </div>

<script>
var longitude = document.getElementById("longitude");
var latitude = document.getElementById("latitude");

function getLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(showPosition);
  } else {
    longitude = 0;
    latitude = 0;
  }
}

function showPosition(position) {
    latitude.value = position.coords.latitude;
    longitude.value = position.coords.longitude;
    myFunction();
 }
 function myFunction() {
  var loc = document.getElementById("loc");
  var chec = document.getElementById("checkbtn");
  ifelsedisply(loc);
  ifelsedisply(chec);
  function ifelsedisply(x){
        if (x.style.display === "none") {
            x.style.display = "block";
          } else {
            x.style.display = "none";
          }
  }

}
</script>
{% endblock %}
